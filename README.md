# NY_Airbnb_2019_Analysis
This project analyzes the 2019 NY Airbnb data using postgreSQL

Background:
this analysis is focused on the business questions related to a client similar to a travel website that serves potential clients looking to rent an Airbnb in NY City.  The data base consists of data related to each listing across the various neighbourhoods and sub neighbourhoods in New York City.  For the purposes of this analysis, the questions answered will be focused on clients looking to rent in the city or Airbnb looking to promote various properties that are under utilized.  One caveat to the data is that after examining the data it appears that it is autogenerated data so the room rates may not reflect what would be expected on the actual travel websites.  For example, the room rates to as low as 10.00.  


The data:
The data focused on with this analysis is related to the following variables:

Location - neighbourhood_group 
room type - Entire home/apt, Private room, or shared room
price - cost per night of the property
Availability - the number of days the property is available during the year

These were selected as the most relevant to a potential client for their personal use or for Airbnb to use to market to potential clients.


Method:
This analysis was conducted by uploading the data to postgresql and analyzing through the use of SQL.  Additional tools used include, excel, Tableau, and openAI (ChatGTP).  
The database was collected from Kaggle.com listed using the link: https://www.kaggle.com/datasets/dgomonov/new-york-city-airbnb-open-data?resource=download 
The data was cleaned and in this process a number of listings with zero price were found and omitted because these were most likely omissions in the data and would skew the overall outputs.  
The number of zero price locations were small enough where it was deeemed acceptable to use the data without these individual listings.  
Next an number of questions were created of which the answers would be of interest to potential clients.



Questions:
1. What is the average cost of each room type accross the city?
2. What are the total number of listings for each type of room?
3. What is the difference from the median price of each listing.
4. What neighborhoods have the most and least average availability
5. For each listings, what is the difference between the price and the average room_type price for each listing?
6. What is the most expensive neiborhood to rent each type of room? least expensive?


Analysis:

the questions the will be answered are the following

1. What is the average cost of each room type accross the city?


select
	neighbourhood_group,
	round(avg(distinct case when room_type='Entire home/apt' then price end),2) as Entire_home_ct,
	round(avg(distinct case when room_type='Private room' then price end),2) as Private_room_ct,
	round(avg(distinct case when room_type='Shared room' then price end),2) as Shared_room_ct
from 
	listings
Group by 
	neighbourhood_group
;


![image](https://github.com/user-attachments/assets/e00e44b0-573b-4d41-8df6-0020231ef2f1)


![image](https://github.com/user-attachments/assets/1768265a-4d53-44cb-ae20-a615d531f20b)



This gives the client an idea of how much each type of rental is averaging in each neighbourhood.  As the data shows, that the rental of an entire home ranges from 167.00 in the Bronx to 662.00 in Manhattan.  For private rooms, the price ranges from 73.00 per night in Staten Island to 386.00 in Manhattan.  Finally, the shared room rental ranges from 58.00 in Staten Island to 139.00 in Manhattan.  The results show that for all rental type, Manhattan will be the most expensive on average while either Staten Island or the Bronx will provide the cheapest options.  This is helpful in guiding the client to the possible neighborhoods that fit the price range for rentals if budget ranks high on the priority list.  



2. What are the total number of listings for each type of room?

select
	neighbourhood_group,
 	count(distinct case when room_type='Entire home/apt' then id end) as Entire_home_ct,
	count(distinct case when room_type='Private room' then id end) as Private_room_ct,
	count(distinct case when room_type='Shared room' then id end) as Shared_room_ct
from 
	listings
Group by 
	neighbourhood_group
;


![image](https://github.com/user-attachments/assets/94987bd6-0e3c-45da-8a14-5cde3dfec1d4)


![image](https://github.com/user-attachments/assets/722bf047-9a3b-4710-9870-fa39f27ec197)


This result is more geared to the business side as they may want to track the inventory but a client may also want to know what kind of room has the most listings and which neighborhoods are more popular for short term rentals.  In  this case, once again different neighborhoods have the majority of each room type.  For full apartments, Manhattan has the largest inventory by almost 3,500 of the next neighborhood which is Brooklyn.  On the other hand Brooklyn is more popular for private room rentals where the inventory exceeds the next neighborhood (Manhattan) by almost 2,000.  Finally, shared room inventory is much lower overall as the neighbourhood with the highest inventory is Manhattan with only 480 with Brooklyn close behind with 413.   

3.  What is the average price for each room type in each neighbourhood and how does that compare to the average price for each room type city wide.


WITH med_price AS (
    SELECT 
        PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY price) AS Median
    FROM 
        listings
)
-- Distance from median
SELECT 
    neighbourhood_group,
	room_type,
	ROUND(AVG(price)::numeric, 2) AS avg_price,  -- Round avg price to 2 decimal places
    ROUND(AVG(l.price - m.Median)::numeric, 2) AS difference_from_median  -- Round difference from median to 2 decimal places
FROM 
    listings l
JOIN 
    med_price m ON true
GROUP BY 
    neighbourhood_group,
	room_type
order by 
	neighbourhood_group
	;




4.  What neighborhoods have the most and least average availability

select 
	neighbourhood_group,
	--room_type,
	--round(avg(listings.availability_365),2) as Avg_availability,
	round(avg(distinct case when room_type='Entire home/apt' then listings.availability_365 end),2) as Entire_home_availability,
	round(avg(distinct case when room_type='Private room' then listings.availability_365 end),2) as Private_room_availability,
	round(avg(distinct case when room_type='Shared room' then listings.availability_365 end),2) as Shared_room_availability
from 
	listings
group by
	neighbourhood_group
;




6.  For each listings, what is the difference between the price and the average room_type price for each listing?


With avg_price_loc as (

select
	room_type,
	round(avg(price),2) avg_price
from 
	listings
group by
	room_type 
)

select 
	Neighbourhood_group,
	id,
	name,
	listings.room_type,
	Price,
	avg_price,
	price-avg_price as price_difference
	
from 
	listings
left join 
avg_price_loc on avg_price_loc.room_type = listings.room_type

order by 
	neighbourhood_group,
	room_type,
	price_difference
;
	


5.  What is the most expensive neiborhood to rent each type of room? least expensive?

SELECT 
	listings.neighbourhood_group,
	room_type,
	ROUND(AVG(price), 2) AS avg_price
FROM 
	listings
GROUP BY 
	neighbourhood_group,
	room_type
ORDER BY 
    neighbourhood_group DESC;


Summary/Insights:







